# Add Dashboard Design

## 1. Create restaurant model file

### File: restaurant.ts

```ts
export interface Restaurant {
  id: number;
  name: string;
  description: string;
  category: string;
  hasDelivery: boolean;
  city: string;
  street: string;
  postalCode: string;
  dishes: any[]; // later you can create Dish interface
}
```

Purpose: Defines the structure of a restaurant object returned from the API.

---

## 2. Create Paginated Response Model

### File: PaginatedResponse.ts

```ts
export interface PaginatedResponse<T> {
  items: T[];
  totalPages: number;
  totalItemsCount: number;
  itemsFrom: number;
  itemsTo: number;
}
```

Purpose: Represents the structure of paginated API responses for any type T.

---

## 3. Dashboard Component

Purpose

The Dashboard component displays a paginated table of restaurants fetched from a backend API. It includes:

- Table of restaurant details (ID, Name, Description, Category, City, Street, PostalCode)
- Pagination controls with Prev / Next buttons
- Loading state and fallback for empty data
- Responsive and styled using Tailwind CSS
- Handles server-side pagination

---

### File: Dashboard.tsx

3.1 Imports

```ts
import React, { useEffect, useState } from "react";
import api from "../api/axios"; // Axios instance for API calls
import type { Restaurant } from "../types/restaurant";
import type { PaginatedResponse } from "../types/PaginatedResponse";
```

- api is a pre-configured Axios instance (with base URL and token handling).
- Restaurant is a TypeScript interface defining a single restaurant object.
- PaginatedResponse is a generic type representing paginated API responses.

  3.2 State Variables

```ts
const [response, setResponse] = useState<PaginatedResponse<Restaurant> | null>(
  null,
);
const [page, setPage] = useState(1);
const [loading, setLoading] = useState(false);
const [pageSize, setPageSize] = useState(10);
```

3.3 Data Fetching (useEffect)

```ts
useEffect(() => {
  const getRestaurants = async () => {
    setLoading(true);

    try {
      const res = await api.get(
        `/restaurants?pageNumber=${page}&pageSize=${pageSize}`,
      );
      setResponse(res.data);
    } catch (error) {
      console.error("Failed to fetch restaurants", error);
    } finally {
      setLoading(false);
    }
  };

  getRestaurants();
}, [page]);
```

Behavior:

1. Runs whenever the page changes.
2. Fetches paginated restaurant data from the backend.
3. Sets loading to true during the fetch and false after.
4. Stores the response in response state.
5. Logs errors to the console if the request fails.

3.4 Rendering the Table

```ts
<table className="min-w-full text-left">
  <thead className="bg-gray-800 text-white">...</thead>
  <tbody>
    {loading ? (
      <tr>
        <td colSpan={7} className="text-center p-6">Loading...</td>
      </tr>
    ) : response?.items.length ? (
      response.items.map((restaurant) => (
        <tr key={restaurant.id} className="border-b hover:bg-gray-50">
          <td className="px-6 py-4 max-w-sm truncate">{restaurant.id}</td>
          <td className="px-6 py-4 max-w-xs truncate">{restaurant.name}</td>
          <td className="px-6 py-4 max-w-xs truncate">{restaurant.description}</td>
          <td className="px-6 py-4 max-w-xs truncate">{restaurant.category}</td>
          <td className="px-6 py-4 max-w-xs truncate">{restaurant.city}</td>
          <td className="px-6 py-4 max-w-xs truncate">{restaurant.street}</td>
          <td className="px-6 py-4 max-w-xs truncate">{restaurant.postalCode}</td>
        </tr>
      ))
    ) : (
      <tr>
        <td colSpan={7} className="text-center p-6 text-gray-500">No restaurants found</td>
      </tr>
    )}
  </tbody>
</table>
```

Features:

- Uses conditional rendering:
- Loading... row while data is fetching
- Maps response.items into table rows
- Shows fallback row if no restaurants are returned
  Uses Tailwind classes:
- truncate for long text
- line-clamp-2 for multi-line ellipsis
- hover:bg-gray-50 for row hover effect

  3.5 Pagination Footer

```ts
<div className="flex justify-between items-center px-6 py-4 bg-gray-50 border-t">
  <p className="text-sm text-gray-600">
    Showing <span className="font-semibold">{response?.itemsFrom ?? 0}</span> to <span className="font-semibold">{response?.itemsTo ?? 0}</span> of <span className="font-semibold">{response?.totalItemsCount ?? 0}</span> entries
  </p>

  <div className="flex gap-2">
    <button disabled={page <= 1} onClick={() => setPage(page - 1)} className="px-3 py-1 rounded-lg border hover:bg-gray-200 disabled:opacity-50">Prev</button>
    <button className="px-3 py-1 rounded-lg bg-gray-800 text-white">{page}</button>
    <button disabled={!response || page >= response.totalPages} onClick={() => setPage(prev => prev + 1)} className="px-3 py-1 rounded-lg border hover:bg-gray-200 disabled:opacity-50">Next</button>
  </div>
</div>
```

Explanation:

- Left side: Shows range info (itemsFrom → itemsTo) and total count.
- Right side: Pagination buttons:
- Prev disabled on first page
- Next disabled on last page
- Updates page state on click → triggers API fetch

Tailwind Styling Notes

- bg-gray-100 → page background
- rounded-2xl shadow-md → card-style table container
- overflow-x-auto → responsive scroll for smaller screens
- line-clamp-2 / truncate → keeps row heights consistent

---

## 4. Axios Configuration

### File: axios.ts

Change:

```ts
// Create Axios instance
const api = axios.create({
  baseURL: "http://localhost:5204", // Backend base URL
});
```

to

```ts
// Create Axios instance
const api = axios.create({
  baseURL: "http://localhost:5204/api", // Backend base URL
});
```
