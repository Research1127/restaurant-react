# SReact Authentication Setup Documentation

This project implements a React + TypeScript login system integrated with an ASP.NET Core Web API for authentication.

The goal is to build a secure and scalable frontend structure that follows modern best practices such as:

- Type-safe API communication
- Controlled form inputs
- REST API integration using Axios
- JWT-based authentication
- Clean folder structure

# Project Setup

### Create React App (TypeScript)

```shell
npm create vite@latest my-app
```

### Install tailwind.css

READ THIS: U NEED TO CONFIGURE TAILWIND USING INSTRUCTION IN WEBSITE
Install tailwind:

```shell
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p
```

Configure tailwind.config.js:

```js
content: [
  "./index.html",
  "./src/**/*.{js,ts,jsx,tsx}",
],
```

Add to `index.css`:

```css
@tailwind base;
@tailwind components;
@tailwind utilities;
```

---

### Install Axios

Axios is used for HTTP communication with the backend.

```shell
npm install axios
```

## Recommended Folder Structure

```yaml
src/
â”‚
â”œâ”€â”€ pages/
â”‚     LoginPage.tsx
â”‚
â”œâ”€â”€ types/
â”‚     LoginPageTypes.ts
â”‚
â”œâ”€â”€ api/
â”‚     axios.ts
â”‚
â”œâ”€â”€ App.tsx
â”œâ”€â”€ index.css
```

ðŸ‘‰ Separation of concerns is important for scalability.

## ðŸ§  Type Definitions

### File: LoginPageTypes.ts

Strong typing improves maintainability and prevents runtime errors.

```ts
export interface LoginRequest {
  email: string;
  password: string;
}

export interface LoginResponse {
  token: string;
  userId: number;
  name: string;
}

export interface LoginError {
  error: string;
}
```

âœ”ï¸ Why this matters:

- Prevents wrong request structure
- Improves IntelliSense
- Makes API contracts clear

**Interview Tip:**

Using interfaces shows TypeScript maturity.

---

## ðŸ” Login Page Implementation

### Controlled Inputs

The login form uses controlled components, meaning React fully manages the input state.

Why controlled inputs?

- Predictable behavior
- Easier validation
- Better debugging
- Industry standard

---

### Login Logic

### axios.ts

Create `src/api/axios.ts file`

```ts
import axios from "axios";

// Create Axios instance
const api = axios.create({
  baseURL: "http://localhost:5204", // Backend base URL
});

// Automatically attach token to every request
api.interceptors.request.use((config) => {
  const token = localStorage.getItem("accessToken");
  if (token && config.headers) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

export default api;
```

âœ… Why: Keeps Axios configuration in one place and automatically adds JWT token for authenticated requests.

---

### LoginPage.tsx

State Management

```ts
const [email, setEmail] = useState<string>("");
const [password, setPassword] = useState<string>("");
```

Form Submission

```ts
const handleLogin = async (event: React.FormEvent<HTMLFormElement>) => {
  event.preventDefault();

  const credentials = { email, password };

  try {
    const response = await api.post("/api/identity/login", {
      email,
      password,
    });
    console.log("Login Success:", response.data);

    // Save token
    localStorage.setItem("accessToken", response.data.accessToken);

    // Redirect to dashboard
    window.location.href = "/dashboard"; // simple redirect
  } catch (error) {
    const errorMessage =
      error instanceof axios.AxiosError
        ? error.response?.data
        : error instanceof Error
          ? error.message
          : "Unknown error";
    console.error("Login Failed:", errorMessage);
  }
};
```

---

## Dashboard Creation

Simple dashboard design

### Dashboard.tsx

Create it under `src/pages/Dashboard.tsx`

```ts
import React from "react";

const Dashboard: React.FC = () => {
  return (
    <div className="min-h-screen flex items-center justify-center text-2xl font-bold">
      Welcome to your Dashboard!
    </div>
  );
};

export default Dashboard;
```

## Routing

### App.tsx

```ts
import React from "react";
import { BrowserRouter as Router, Routes, Route } from "react-router-dom";
import LoginPage from "./pages/LoginPage";
import Dashboard from "./pages/Dashboard";
import { Navigate } from "react-router-dom";

const App: React.FC = () => {
  const isAuthenticated = !!localStorage.getItem("accessToken");
  return (
    <Router>
      <Routes>
        <Route path="/" element={<LoginPage />} />
        <Route
          path="/dashboard"
          element={
            isAuthenticated ? <Dashboard /> : <Navigate to="/" replace />
          }
        />
      </Routes>
    </Router>
  );
};

export default App;

```

This protects /dashboard so only logged-in users can access it.

---

## ðŸŒ Backend Connection

The React app communicates with ASP.NET Identity via:

```yaml
POST /api/identity/login
```

Example Response:

```yaml
{
  "tokenType": "Bearer",
  "accessToken": "...",
  "expiresIn": 3600,
  "refreshToken": "...",
}
```

---

## ðŸš¨ CORS Configuration (Backend)

Since React and ASP.NET run on different ports, CORS must be enabled.

### Program.cs

Register CORS:

```csharp
builder.Services.AddCors(options =>
{
    options.AddPolicy("AllowReact",
        policy =>
        {
            policy.WithOrigins("http://localhost:5173")
                  .AllowAnyHeader()
                  .AllowAnyMethod();
        });
});

```

Enable Middleware:

```csharp
app.UseCors("AllowReact");
```

ðŸ‘‰ Must be placed before Authorization middleware.
